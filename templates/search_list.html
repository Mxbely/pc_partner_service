{% extends "base.html" %}

{% block title %}
<title>üìë –°–ø–∏—Å–æ–∫ –º—ñ—Å—ñ–π</title>
{% endblock title %}

{% block content %}

<br>

<div class="base-container">
    <h2 align="center">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤</h2>

    <div id="alert" class="alert d-none" role="alert" style="white-space: pre-line;"></div>

    <div class="buttons-block default-margin-top">
        <form action="/search" method="get">
            <input type="text" name="query" placeholder="–ü–æ—à—É–∫" />
            <button type="submit" class="btn btn-primary">–ü–æ—à—É–∫</button>   
        </form>
        <div>
            <span class="badge badge-info">–ó–Ω–∞–π–¥–µ–Ω–æ {{ total_items }} —Ç–æ–≤–∞—Ä—ñ–≤</span>
            <span class="badge badge-secondary">–ó–∞–ø–∏—Ç: "{{ query }}"</span>
        </div>
    </div>
    <form class="mt-3">
        <table class="table table-bordered table-striped">
            <colgroup>
                <col style="width: 15%;">
                <col style="width: 10%;">
                <col style="width: auto;">
                <col style="width: 10%;">
                <col style="width: 10%;">
                <col style="width: 10%;">
            </colgroup>
            <thead class="table-light">
                <tr>
                    <th>–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫</th>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
                    <th>–ù–∞–∑–≤–∞</th>
                    <th>–¶—ñ–Ω–∞</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ü–æ—Å–∏–ª–∞–Ω–Ω—è</th>
                </tr>
            </thead>
            <tbody>
                {% if item_list %}
                {% for item in item_list %}
                <tr>
                    <td>{{ item.src }}</td>
                    <td>{{ item.category }}</td>
                    <td>{{ item.name }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.status }}</td>
                    <td class="link-cell">
                        <a href="{{ item.url }}" title="{{ item.url }}" target="_blank" class="link-ellipsis">
                            {{ item.url }}
                        </a>
                    </td>
                </tr>
                {% endfor %}
                {% else %}
                <tr>
                    <td colspan="6" class="empty-row">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </form>
</div>

<style>
    .link-cell {
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .link-ellipsis {
        display: inline-block;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .link-ellipsis:hover {
        text-decoration: underline;
    }

    table {
        width: 100%;
        table-layout: fixed;
    }

    th,
    td {
        vertical-align: middle;
        text-align: left;
    }

    .empty-row {
        text-align: center;
        color: #888;
    }
</style>

{% endblock content %}
